(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(24),s=n.n(c),o=n(2),i=n(36),l=n.n(i),u=n(3),d=n(11),p=n(10),j=function(e,t){return 1===e.length?e:e.filter((function(e){return e._id!==t}))},f=function(e,t){var n=e.chatName;n||(n=j(e.users,t).map((function(e){return e.firstName+" "+e.lastName})).join(", "));return n},b=(n(108),n(0)),O=function(e){var t=e.imageUrls,n=e.linkTo,a=e.header,r=e.subText,c=e.listText,s=e.containerClassName,o=e.imageClassName,i=e.onItemClick;return Object(b.jsxs)(p.b,{to:n||"#",className:"resultListItem ".concat(s||""),onClick:i,children:[t&&Object(b.jsx)("div",{className:"resultsImageContainer ".concat(o||""),children:t.map((function(e,t){return Object(b.jsx)("img",{src:e,alt:"Chat Pic"},t)}))}),Object(b.jsxs)("div",{className:"resultsDetailsContainer ellipsis",children:[a&&Object(b.jsx)("span",{className:"heading ellipsis",children:a}),c&&Object(b.jsx)("span",{className:"ellipsis",children:c}),r&&Object(b.jsx)("span",{className:"subText ellipsis",children:r})]})]})},h=function(e){var t=e.chat,n=e.latestMessage,a=Object(o.c)((function(e){return e})).loggedInUserInfo.user;if(!a)return Object(b.jsx)("p",{children:"Not Authenticated"});var r=a._id,c=j(t.users,r),s=f(t,r),i=function(e){var t=[],n=e[0].profilePic;return t.push(n),e.length>1&&t.push(e[1].profilePic),t}(c),l=i.length>1?"groupChatImage":"",u=n||t.latestMessage,d=function(e){if(e){var t=e.sender;return"".concat(t.firstName," ").concat(t.lastName,": ").concat(e.content)}return"New chat"}(u),p=!u||u.readBy.includes(r)?"":"active";return Object(b.jsx)(O,{linkTo:"/message/".concat(t._id),imageUrls:i,header:s,subText:d,imageClassName:l,containerClassName:p})},g=n(5),m=n.n(g),x=n(8),v="USER_AUTHENTICATE_LOADING",y="USER_AUTHENTICATE_FAIL",N="USER_AUTHENTICATE_SUCCESS",_="LOGGED_IN_USER_INFO_LOADING",S="LOGGED_IN_USER_INFO_FAIL",C="LOGGED_IN_USER_INFO_SUCCESS",I="UPDATE_AUTH_USER",w="USER_LOGOUT",T="USER_INFO_LOADING",E="USER_INFO_FAIL",A="USER_INFO_SUCCESS",L="USER_INFO_UPDATE_FOLLOWERS",k="USER_FOLLOW_LOADING",U="USER_FOLLOW_FAIL",P="USER_FOLLOW_SUCCESS",F="USER_FOLLOWERS_LOADING",D="USER_FOLLOWERS_FAIL",R="USER_FOLLOWERS_SUCCESS",B="USER_FOLLOWING_LIST_LOADING",M="USER_FOLLOWING_LIST_FAIL",G="USER_FOLLOWING_LIST_SUCCESS",H="https://tweethouse.online",W=l.a.create({baseURL:H});W.interceptors.request.use((function(e){var t=localStorage.getItem("userInfo");return t&&(e.headers.Authorization="Bearer ".concat(JSON.parse(t).token)),e}));var K={headers:{"Content-Type":"multipart/form-data"}},q=function(e){return W.get("/api/users/profile/".concat(e))},J=function(e){return W.put("/api/users/".concat(e,"/follow"))},Y=function(e){return W.get("/api/users/".concat(e,"/followers"))},V=function(e){return W.get("/api/users/".concat(e,"/following"))},z=function(e){return W.get("api/users?search=".concat(e))},$=function(e){return W.get("/api/posts?postedBy=".concat(e))},Q=function(e){return W.get("/api/posts?postedBy=".concat(e,"&isReply=true"))},X=function(e){return W.get("/api/posts/".concat(e))},Z=function(e){return W.post("/api/posts",e)},ee=function(e){return W.post("/api/posts/".concat(e,"/retweet"))},te=function(e){return W.put("/api/posts/".concat(e,"/like"))},ne=function(e,t){return W.put("/api/posts/".concat(e),t)},ae=function(e){return W.delete("/api/posts/".concat(e))},re=function(e){return W.get("/api/chats/".concat(e))},ce=function(e){return W.post("/api/chats",{users:e})},se=function(e,t){return W.put("/api/chats/".concat(e),{chatName:t})},oe=function(e,t){return W.post("/api/messages",{content:e,chatId:t})},ie=function(e){return W.get("/api/chats/".concat(e,"/messages"))},le=function(e){return W.put("/api/chats/".concat(e,"/messages/markAsRead"))},ue=function(e){return W.post("/api/uploads/profilePicture",e,K)},de=function(e){return W.post("/api/uploads/coverPhoto",e,K)},pe=function(e){var t="Something Went Wrong";return e.response&&e.response.data.message?t=e.response.data.message:e.message&&(t=e.message),t},je=n(47),fe=n.n(je),be="MESSAGE_LIST_LOADING",Oe="MESSAGE_LIST_SUCCESS",he="MESSAGE_LIST_FAIL",ge="MESSAGE_SEND_LOADING",me="MESSAGE_SEND_SUCCESS",xe="MESSAGE_SEND_FAIL",ve="MESSAGE_ADD_TO_LIST",ye="MESSAGE_MARK_AS_READ_LOADING",Ne="MESSAGE_MARK_AS_READ_SUCCESS",_e="MESSAGE_MARK_AS_READ_FAIL",Se="MESSAGE_MARK_AS_READ_RESET",Ce="SOCKET_CONNECT",Ie="SOCKET_CHAT_ROOM_TYPING",we="SOCKET_CHAT_ROOM_TYPING_RESET",Te="CHAT_LIST_LOADING",Ee="CHAT_LIST_SUCCESS",Ae="CHAT_LIST_FAIL",Le="CHAT_UNREAD_LIST_LOADING",ke="CHAT_UNREAD_LIST_SUCCESS",Ue="CHAT_UNREAD_LIST_FAIL",Pe="CHAT_DETAILS_LOADING",Fe="CHAT_DETAILS_SUCCESS",De="CHAT_DETAILS_FAIL",Re="CHAT_CREATE_LOADING",Be="CHAT_CREATE_SUCCESS",Me="CHAT_CREATE_FAIL",Ge="CHAT_UPDATE_LOADING",He="CHAT_UPDATE_SUCCESS",We="CHAT_UPDATE_FAIL",Ke=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ye}),t.next=4,le(e);case 4:n({type:Ne}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:_e,payload:pe(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},qe=function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Le}),e.next=4,W.get("/api/chats?unreadOnly=true");case 4:n=e.sent,a=n.data,t({type:ke,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Ue,payload:pe(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},Je="NOTIFICATION_LIST_LOADING",Ye="NOTIFICATION_LIST_SUCCESS",Ve="NOTIFICATION_LIST_FAIL",ze="NOTIFICATION_UNREAD_LIST_LOADING",$e="NOTIFICATION_UNREAD_LIST_SUCCESS",Qe="NOTIFICATION_UNREAD_LIST_FAIL",Xe="NOTIFICATION_LATEST_LOADING",Ze="NOTIFICATION_LATEST_SUCCESS",et="NOTIFICATION_LATEST_FAIL",tt="NOTIFICATION_MARK_AS_OPENED_LOADING",nt="NOTIFICATION_MARK_AS_OPENED_SUCCESS",at="NOTIFICATION_MARK_AS_OPENED_FAIL",rt="NOTIFICATION_MARK_AS_OPENED_RESET",ct="NOTIFICATION_POPUP_REMOVE",st=function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ze}),e.next=4,W.get("/api/notifications?unreadOnly=true");case 4:n=e.sent,a=n.data,t({type:$e,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Qe,payload:pe(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},ot=function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a({type:tt}),!e){n.next=7;break}return n.next=5,r=e,W.put("/api/notifications/".concat(r,"/markAsOpened"));case 5:n.next=9;break;case 7:return n.next=9,W.put("/api/notifications/markAsOpened");case 9:t?t():window.location.reload(),a({type:nt}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),a({type:at,payload:pe(n.t0)});case 16:case"end":return n.stop()}var r}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}()},it=fe()(),lt=function(e,t){it.emit("setup",e),it.on("connected",(function(){return t({type:Ce,payload:{isConnected:!0}})})),it.on("message received",(function(e){!(document.location.pathname==="/message/".concat(e.chat._id))?(console.log("Show notification..."),t({type:Ze,payload:e})):(t({type:ve,payload:e}),t(Ke(e.chat._id))),t(qe())})),it.on("notification received",(function(){t(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Xe}),e.next=4,W.get("/api/notifications/latest");case 4:n=e.sent,a=n.data,t({type:Ze,payload:a}),t(st()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:et,payload:pe(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}))},ut=n(27),dt=n(75),pt=n(76),jt=n(17),ft="POST_CREATE_LOADING",bt="POST_CREATE_SUCCESS",Ot="POST_CREATE_FAIL",ht="POST_LIST_LOADING",gt="POST_LIST_SUCCESS",mt="POST_LIST_FAIL",xt="POST_LIST_UPDATE_ONLIKE",vt="POST_DETAILS_LOADING",yt="POST_DETAILS_SUCCESS",Nt="POST_DETAILS_FAIL",_t="POST_UPDATE_LOADING",St="POST_UPDATE_SUCCESS",Ct="POST_UPDATE_FAIL",It="POST_LIKE_LOADING",wt="POST_LIKE_SUCCESS",Tt="POST_LIKE_FAIL",Et="POST_RETWEET",At="POST_DELETE_LOADING",Lt="POST_DELETE_SUCCESS",kt="POST_DELETE_FAIL";function Ut(e,t,n,a){var r=n||t._id,c=e.findIndex((function(e){return e._id===r})),s=Object(jt.a)(e);return n?s[c].retweetData[a]=t[a]:s[c][a]=t[a],{posts:s}}var Pt,Ft="SEARCH_LOADING",Dt="SEARCH_POSTS_SUCCESS",Rt="SEARCH_USERS_SUCCESS",Bt="SEARCH_RESET",Mt="PROFILE_PIC_UPLOAD_LOADING",Gt="PROFILE_PIC_UPLOAD_SUCCESS",Ht="PROFILE_PIC_UPLOAD_FAIL",Wt={loading:!1},Kt={loading:!1},qt=Object(ut.combineReducers)({userAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{loading:!0};case N:return{loading:!1,user:t.payload};case y:return{loading:!1,error:t.payload};case w:return{};default:return e}},userInfo:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case T:return{loading:!0};case A:return{loading:!1,user:n.payload};case E:return{loading:!1,error:n.payload};case w:return{};case L:var a,r,c=n.payload,s=null===(e=t.user)||void 0===e?void 0:e.followers.indexOf(c),o=Object(u.a)({},t.user);if(void 0!==s&&s>-1)null===(a=o.followers)||void 0===a||a.splice(s,1);else null===(r=o.followers)||void 0===r||r.push(c);return{user:o};default:return t}},loggedInUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0};case C:return{loading:!1,user:t.payload};case S:return{loading:!1,error:t.payload};case w:return{};default:return e}},userFollow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case P:return{loading:!1,success:!0};case U:return{loading:!1,error:t.payload};default:return e}},userFollowers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case R:return{loading:!1,users:t.payload};case D:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},userFollowingList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case G:return{loading:!1,users:t.payload};case M:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},profilePicUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return{loading:!0};case Gt:return{loading:!1,success:!0};case Ht:return{loading:!1,error:t.payload};default:return e}},postList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case gt:return{loading:!1,posts:t.payload};case mt:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});case bt:var n=Object(jt.a)(e.posts);return n.unshift(t.payload),Object(u.a)(Object(u.a)({},e),{},{posts:n});case xt:return Ut(e.posts,t.payload.data,t.payload.retweetId,"likes");case Et:return Ut(e.posts,t.payload.data,t.payload.retweetId,"retweetUsers");default:return e}},postDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return{loading:!0};case yt:return{loading:!1,post:t.payload};case Nt:return{loading:!1,error:t.payload};default:return e}},postCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return{loading:!0};case bt:return{loading:!1,success:!0,post:t.payload};case Ot:return{loading:!1,error:t.payload};default:return e}},postLike:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return{loading:!0};case wt:return{loading:!1,success:!0,post:t.payload};case Tt:return{loading:!1,error:t.payload};default:return e}},postDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return{loading:!0};case Lt:return{loading:!1,success:!0,message:t.payload};case kt:return{loading:!1,error:t.payload};default:return e}},postUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:return{loading:!0};case St:return{loading:!1,success:!0};case Ct:return{loading:!1,error:t.payload};default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[],posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case Dt:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,posts:t.payload});case Rt:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,users:t.payload});case Bt:return{users:[],posts:[]};default:return e}},chatList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case Ee:return{loading:!1,chats:t.payload};case Ae:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},chatDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return{loading:!0};case Fe:return{loading:!1,chat:t.payload};case De:return{loading:!1,error:t.payload};default:return e}},chatCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return{loading:!0};case Be:return{loading:!1,success:!0,chat:t.payload};case Me:return{error:t.payload};default:return e}},chatUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return{loading:!0};case He:return{loading:!1,success:!0};case We:return{error:t.payload};default:return e}},chatUnreadList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chats:[],totalCount:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case ke:return{loading:!1,chats:t.payload,totalCount:t.payload.length};case Ue:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},messageList:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},n=arguments.length>1?arguments[1]:void 0,a=Object(jt.a)(t.messages),r=localStorage.getItem("messageId");switch(n.type){case be:return Object(u.a)(Object(u.a)({},t),{},{loading:!0});case Oe:return{loading:!1,messages:n.payload};case he:return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:n.payload});case ge:var c=Object(u.a)(Object(u.a)({},n.payload),{},{_id:r,readBy:[n.payload.sender._id],loading:!0});return a.push(c),Object(u.a)(Object(u.a)({},t),{},{messages:a});case me:return a.forEach((function(e){return e.loading?e.loading=!1:null})),Object(u.a)(Object(u.a)({},t),{},{messages:a});case xe:return e=t.messages.findIndex((function(e){return e._id===r})),a.forEach((function(e){return e.loading?e.loading=!1:null})),a[e].error="failed",Object(u.a)(Object(u.a)({},t),{},{messages:a});case ve:return a.push(n.payload),Object(u.a)(Object(u.a)({},t),{},{messages:a});default:return t}},messageSend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return{loading:!0};case me:return{loading:!1,success:!0};case xe:return{loading:!1,error:t.payload.error,failedTextMessage:t.payload.failedTextMessage};default:return e}},messageMark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return{loading:!0};case Ne:return{loading:!1,success:!0};case _e:return{loading:!1,error:t.payload};case Se:return{};default:return e}},notificationList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case Ye:return{loading:!1,notifications:t.payload};case Ve:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},notificationUnreadList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[],totalCount:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case $e:return{loading:!1,notifications:t.payload,totalCount:t.payload.length};case Qe:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},notificationPopupList:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Xe:return Object(u.a)(Object(u.a)({},t),{},{loading:!0});case Ze:return(e=Object(jt.a)(t.notifications)).push(n.payload),{loading:!1,notifications:e};case et:return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:n.payload});case ct:return(e=Object(jt.a)(t.notifications)).shift(),Object(u.a)(Object(u.a)({},t),{},{notifications:e});default:return t}},notificationMark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return{loading:!0};case nt:return{loading:!1,success:!0};case at:return{loading:!1,error:t.payload};case rt:return{};default:return e}},socketConnect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return{isConnected:t.payload.isConnected};default:return e}},socketChatRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return{isTyping:t.payload.isTyping,room:t.payload.room};case we:return{};default:return e}}}),Jt={userAuth:{user:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Yt=Object(ut.createStore)(qt,Jt,Object(dt.composeWithDevTools)(Object(ut.applyMiddleware)(pt.a))),Vt=!1,zt=function(e){it.emit("stop typing",e),Vt=!1},$t=function(e){it.emit("new message",e)},Qt=function(e){var t,n;(n="string"===typeof e?e:e._id)!==(null===(t=Yt.getState().loggedInUserInfo.user)||void 0===t?void 0:t._id)&&it.emit("notification received",n)},Xt=function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a({type:v}),"login"!==t){n.next=8;break}return n.next=5,o=e,W.post("/api/users/login",o);case 5:r=n.sent,n.next=11;break;case 8:return n.next=10,s=e,W.post("/api/users",s);case 10:r=n.sent;case 11:c=r.data,a({type:N,payload:c}),a({type:C,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),a({type:y,payload:pe(n.t0)});case 20:case"end":return n.stop()}var s,o}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},Zt=function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:_}),e.next=4,W.get("/api/users/myprofile");case 4:n=e.sent,a=n.data,t({type:C,payload:a}),t({type:I,payload:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:S,payload:pe(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},en=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),t.next=4,q(e);case 4:a=t.sent,r=a.data,n({type:A,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:E,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},tn=function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,J(e);case 3:r=n.sent,c=r.data,a({type:I,payload:c}),a({type:C,payload:c}),t&&a({type:L,payload:c._id}),Qt(e),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:U,payload:pe(n.t0)});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},nn=(n(143),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})),n=t.notificationUnreadList.totalCount,a=t.chatUnreadList.totalCount;return Object(b.jsxs)("div",{className:"nav",children:[Object(b.jsx)(p.b,{to:"/",className:"nav-link blue",children:Object(b.jsx)("i",{className:"fas fa-dove"})}),Object(b.jsx)(p.b,{to:"/",className:"nav-link",children:Object(b.jsx)("i",{className:"fas fa-home"})}),Object(b.jsx)(p.b,{to:"/search/posts",className:"nav-link",children:Object(b.jsx)("i",{className:"fas fa-search"})}),Object(b.jsxs)(p.b,{to:"/notifications",className:"nav-link",children:[Object(b.jsx)("i",{className:"fas fa-bell"}),n>0&&Object(b.jsx)("span",{id:"notificationsBadge",children:n})]}),Object(b.jsxs)(p.b,{to:"/messages",className:"nav-link",children:[Object(b.jsx)("i",{className:"fas fa-envelope"}),a>0&&Object(b.jsx)("span",{id:"messagesBadge",children:a})]}),Object(b.jsx)(p.b,{to:"/profile",className:"nav-link",children:Object(b.jsx)("i",{className:"fas fa-user"})}),Object(b.jsx)(p.b,{to:"/login",className:"nav-link",onClick:function(){e((function(e){localStorage.removeItem("userInfo"),e({type:w})}))},children:Object(b.jsx)("i",{className:"fas fa-sign-out-alt"})})]})}),an=function(e){var t=e.notification,n=t._id,a=t.userFrom,r=t.opened,c=function(e){var t=e.userFrom,n=e.notificationType;if(!t.firstName||!t.lastName)return alert("User from data not populated"),"";var a="".concat(t.firstName," ").concat(t.lastName),r="";switch(n){case"retweet":r="".concat(a," retweeted one of your posts");break;case"postLike":r="".concat(a," liked one of your posts");break;case"reply":r="".concat(a," replied to one of your posts");break;case"follow":r="".concat(a," followed you")}return r}(t),s=function(e){var t="#",n=e.notificationType,a=e.entityId;switch(n){case"retweet":case"postLike":case"reply":t="/post/".concat(a);break;case"follow":t="/profile/".concat(a)}return t}(t),i=r?"":"active",l=Object(d.g)(),u=Object(o.b)();return Object(b.jsx)(O,{linkTo:s,imageUrls:[a.profilePic],listText:c,containerClassName:i,onItemClick:function(e){if(!r){e.preventDefault();u(ot(n,(function(){l.push(s)})))}}})},rn=(n(144),function(e){var t=e.title,n=e.headerBtnIcon,a=e.link,r=e.onBtnClick;return Object(b.jsxs)("div",{className:"titleContainer",children:[Object(b.jsx)("h1",{children:t}),n&&(a?Object(b.jsx)(p.b,{to:a,children:Object(b.jsx)("i",{className:n})}):Object(b.jsx)("button",{className:"headerButton",onClick:r,children:Object(b.jsx)("i",{className:n})}))]})}),cn=(n(145),function(e){var t=e.children,n=e.pageTitle,r=Object(o.b)(),c=Object(o.c)((function(e){return e})).notificationPopupList.notifications;return Object(a.useEffect)((function(){c.length>0&&setTimeout((function(){r({type:ct})}),5e3)}),[c,r]),Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("nav",{className:"col-2",children:Object(b.jsx)(nn,{})}),Object(b.jsxs)("div",{className:"mainSectionContainer col-10 col-md-8",children:[n&&Object(b.jsx)(rn,{title:n}),t]}),Object(b.jsx)("div",{id:"notificationPopupList",children:c.length>0&&c.map((function(e){var t;return e.notificationType?(t=e,Object(b.jsx)(an,{notification:t},t._id)):e.content?(t=e,Object(b.jsx)(h,{chat:t.chat,latestMessage:t},t._id)):null}))}),Object(b.jsx)("div",{className:"d-none d-md-block col-md-2"})]})})}),sn=n(7),on=function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a({type:ht}),!e||!t){n.next=8;break}return n.next=5,Q(e);case 5:r=n.sent,n.next=17;break;case 8:if(!e){n.next=14;break}return n.next=11,$(e);case 11:r=n.sent,n.next=17;break;case 14:return n.next=16,W.get("/api/posts?followingOnly=true");case 16:r=n.sent;case 17:c=r.data,a({type:gt,payload:c}),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),a({type:mt,payload:pe(n.t0)});case 24:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(e){return n.apply(this,arguments)}}()},ln=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ft}),t.next=4,Z(e);case 4:a=t.sent,r=a.data,n({type:bt,payload:r}),r.replyTo&&(Qt(r.replyTo.postedBy),console.log("Emitting Notification")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Ot,payload:pe(t.t0)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},un=(n(44),function(e){var t=e.uri;return Object(b.jsx)("div",{className:"userImageContainer",children:Object(b.jsx)("img",{src:"".concat(t),alt:"Profile Pic"})})}),dn=(n(146),function(e){var t=e.imageUrl,n=e.creating,r=e.error,c=e.createSuccess,s=Object(a.useState)(""),i=Object(sn.a)(s,2),l=i[0],u=i[1],d=Object(o.b)();return Object(a.useEffect)((function(){c&&u("")}),[c]),Object(b.jsxs)("div",{className:"postFormContainer",children:[Object(b.jsx)(un,{uri:t}),Object(b.jsxs)("div",{className:"textAreaContainer",children:[Object(b.jsx)("textarea",{id:"postTextarea",placeholder:"What's happening?",value:l,onChange:function(e){return u(e.target.value)}}),r&&Object(b.jsx)("p",{children:r}),Object(b.jsx)("div",{className:"buttonsContainer",children:Object(b.jsx)("button",{id:"submitPostButton",disabled:l.trim().length<1,onClick:function(){l.trim().length<1?alert("Please enter some text"):d(ln({content:l}))},children:n?"....":"Post"})})]})]})}),pn=(n(147),function(e){var t=e.message,n=void 0===t?"Nothing to show":t;return Object(b.jsx)("div",{className:"fallbackMessage",children:Object(b.jsx)("span",{className:"fallbackText",children:n})})}),jn=(n(148),function(){return Object(b.jsx)("div",{className:"loadingSpinnerContainer",children:Object(b.jsx)("img",{src:"/images/loadingSpinner.gif",alt:"Loading..."})})}),fn=(n(30),n(164)),bn=n(165),On=function(e){var t=e.show,n=e.title,a=e.actionBtnText,r=e.cancelBtnText,c=e.children,s=e.loadingSave,o=e.error,i=e.submitHandler,l=e.handleClose;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(fn.a,{show:t,onHide:l,onClick:function(e){return e.stopPropagation()},className:"modal",children:[Object(b.jsxs)(fn.a.Header,{closeButton:!0,children:[Object(b.jsx)(fn.a.Title,{children:n}),o&&Object(b.jsx)("p",{children:o})]}),Object(b.jsx)(fn.a.Body,{children:c}),Object(b.jsxs)(fn.a.Footer,{children:[Object(b.jsx)(bn.a,{variant:"secondary",onClick:l,children:r}),Object(b.jsx)(bn.a,{variant:"primary",onClick:i,children:s?"....":a})]})]})})};On.defaultProps={actionBtnText:"Save Changes",cancelBtnText:"Close"};var hn=On,gn=function(e){var t=e.postId,n=Object(a.useState)(!1),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),l=Object(sn.a)(i,2),u=l[0],d=l[1],p=Object(o.b)(),j=Object(o.c)((function(e){return e.userAuth})).user,f=Object(o.c)((function(e){return e.postList.posts})).find((function(e){return e._id===t})),O=Object(o.c)((function(e){return e.postCreate})),h=O.success,g=O.loading,m=O.error,x=function(){return s(!1)};Object(a.useEffect)((function(){h&&x()}),[h]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(e){e.stopPropagation(),s(!0)},children:Object(b.jsx)("i",{className:"far fa-comment"})}),Object(b.jsxs)(hn,{show:c,title:"Reply",actionBtnText:"Reply",cancelBtnText:"Cancel",loadingSave:g,error:m,submitHandler:function(){p(ln({content:u,replyTo:t}))},handleClose:x,children:[f?Object(b.jsx)(vn,{post:f,userId:j._id}):Object(b.jsx)("p",{children:"Post not found"}),Object(b.jsxs)("div",{className:"postFormContainer",children:[Object(b.jsx)(un,{uri:j.profilePic}),Object(b.jsx)("div",{className:"textAreaContainer",children:Object(b.jsx)("textarea",{id:"postTextarea",placeholder:"What's happening?",value:u,onChange:function(e){return d(e.target.value)}})})]})]})]})},mn=function(e){var t=e.postId,n=Object(a.useState)(!1),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(o.b)(),l=function(){return s(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(e){e.stopPropagation(),s(!0)},children:Object(b.jsx)("i",{className:"fas fa-times"})}),Object(b.jsx)(hn,{show:c,title:"Delete the post?",actionBtnText:"Delete",cancelBtnText:"Close",loadingSave:!1,submitHandler:function(){var e;i((e=t,function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:At}),t.next=4,ae(e);case 4:a=t.sent,r=a.data.message,n({type:Lt,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:kt,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())),l()},handleClose:l,children:"You won't be able to delete this."})]})},xn=(n(150),function(e){var t=e.postId,n=e.isPinned,r=Object(a.useState)(!1),c=Object(sn.a)(r,2),s=c[0],i=c[1],l=Object(o.b)(),u=function(){return i(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"pinButton ".concat(n&&"active"),onClick:function(e){e.stopPropagation(),i(!0)},children:Object(b.jsx)("i",{className:"fas fa-thumbtack"})}),Object(b.jsx)(hn,{show:s,title:n?"Unpin the post?":"Pin this post?",actionBtnText:n?"Unpin":"Pin",cancelBtnText:"Close",loadingSave:!1,submitHandler:function(){var e,a;l((e=t,a={pinned:!n},function(){var t=Object(x.a)(m.a.mark((function t(n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:_t}),t.next=4,ne(e,a);case 4:r=t.sent,c=r.data.message,n({type:St,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:Ct,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())),u()},handleClose:u,children:n?"This post will be unpinned":"This post will appear at the top of your profile. You can only pin one post"})]})}),vn=function(e){var t,n,a=e.post,r=e.userId,c=e.largeFont,s=a.retweetData,i=s?a.postedBy.userName:null,l=a.replyTo?null===(t=a.replyTo)||void 0===t||null===(n=t.postedBy)||void 0===n?void 0:n.userName:null,u=s?a._id:null,j=a.retweetData||a,f=j.postedBy,O=j.content,h=j.createdAt,g=j._id,v=j.likes,y=j.retweetUsers,N=j.pinned,_=r===f._id,S=f.firstName+" "+f.lastName,C=function(e,t){var n=6e4,a=36e5,r=864e5,c=2592e6,s=31536e6,o=e.getTime()-t.getTime();return o<n?o/1e3<30?"Just now":Math.round(o/1e3)+" seconds ago":o<a?Math.round(o/n)+" minutes ago":o<r?Math.round(o/a)+" hours ago":o<c?Math.round(o/r)+" days ago":o<s?Math.round(o/c)+" months ago":Math.round(o/s)+" years ago"}(new Date,new Date(h)),I=(null===v||void 0===v?void 0:v.includes(r))?"active-red":"",w=y.includes(r)?"active-green":"",T=c?"largeFont":"",E=Object(o.b)(),A=Object(d.g)(),L=(null===v||void 0===v?void 0:v.length)||"",k=y.length||"";return Object(b.jsxs)("div",{className:"post ".concat(T),onClick:function(){A.push("/post/".concat(a._id))},children:[i&&Object(b.jsx)("div",{className:"postActionContainer",children:Object(b.jsxs)("span",{children:[Object(b.jsx)("i",{className:"fas fa-retweet "})," Retweeted by @",Object(b.jsx)(p.b,{to:"#",children:i})]})}),Object(b.jsxs)("div",{className:"mainContentContainer",children:[Object(b.jsx)(un,{uri:f.profilePic}),Object(b.jsxs)("div",{className:"postContentContainer",children:[N&&Object(b.jsxs)("div",{className:"pinnedPostText",children:[Object(b.jsx)("i",{className:"fas fa-thumbtack"})," ",Object(b.jsx)("span",{children:" Pinned post"})," "]}),Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("div",{className:"headerContents",children:[Object(b.jsx)(p.b,{to:"/profile/".concat(f.userName),className:"displayName",onClick:function(e){e.stopPropagation()},children:S}),Object(b.jsxs)("span",{className:"username",children:[" @",f.userName]}),Object(b.jsxs)("span",{className:"date",children:[" ",C]})]}),_&&Object(b.jsxs)("div",{className:"headerButtons",children:[Object(b.jsx)(xn,{postId:g,isPinned:N}),Object(b.jsx)(mn,{postId:g})]})]}),l&&Object(b.jsxs)("div",{className:"replyFlag",children:["Replying to ",Object(b.jsxs)(p.b,{to:"#",children:["@",l]})," "]}),Object(b.jsx)("div",{className:"postBody",children:Object(b.jsx)("span",{children:O})}),Object(b.jsxs)("div",{className:"postFooter",children:[Object(b.jsx)("div",{className:"postButtonContainer",children:Object(b.jsx)(gn,{postId:g})}),Object(b.jsx)("div",{className:"postButtonContainer",children:Object(b.jsxs)("button",{className:"".concat(w),children:[Object(b.jsx)("i",{onClick:function(e){e.stopPropagation(),E(function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a,r){var c,s,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ee(e);case 3:c=n.sent,s=c.data,a({type:Et,payload:{data:s,retweetId:t}}),o=r().loggedInUserInfo.user._id,s.retweetUsers.includes(o)&&Qt(s.postedBy._id),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(g,u))},className:"fas fa-retweet green"}),Object(b.jsx)("span",{children:k})]})}),Object(b.jsx)("div",{className:"postButtonContainer",children:Object(b.jsxs)("button",{className:"likeButton ".concat(I),children:[Object(b.jsx)("i",{onClick:function(e){e.stopPropagation(),E(function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a,r){var c,s,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:It}),c=r().loggedInUserInfo.user._id,n.next=5,te(e);case 5:s=n.sent,o=s.data,a({type:xt,payload:{data:o,retweetId:t}}),a({type:wt,payload:o}),o.likes.includes(c)&&Qt(o.postedBy._id),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),a({type:Tt,payload:pe(n.t0)});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}()}(g,u))},className:"far fa-heart red"}),Object(b.jsx)("span",{children:L})]})})]})]})]})]})},yn=function(e){var t=e.posts,n=e.userId,a=e.loading;return Object(b.jsx)("div",{className:"resultsContainer",children:a?Object(b.jsx)(jn,{}):0===t.length?Object(b.jsx)(pn,{}):t.map((function(e){return Object(b.jsx)(vn,{post:e,userId:n},e._id)}))})},Nn=n(78),_n=function(e){var t=e.title,n=e.description,a=e.keywords;return Object(b.jsxs)(Nn.a,{children:[Object(b.jsx)("title",{children:t}),Object(b.jsx)("meta",{name:"description",content:n}),Object(b.jsx)("meta",{name:"keyword",content:a})]})};_n.defaultProps={title:"Welcome To Tweet House",description:"Tweet House for developers",keywords:"Computer talks, Software development, Application, Software Engineer"};var Sn,Cn,In,wn=_n,Tn=function(e){e.history;var t=Object(o.c)((function(e){return e})),n=t.loggedInUserInfo.user,r=t.postList,c=r.posts,s=r.loading,i=r.error,l=t.postCreate,u=l.loading,d=l.error,p=l.success,j=t.postDelete.success,f=t.postUpdate.success,O=Object(o.b)();return Object(a.useEffect)((function(){O(on())}),[O,j,f]),n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{}),Object(b.jsx)(dn,{imageUrl:n.profilePic,creating:u,error:d,createSuccess:p}),i?Object(b.jsx)("p",{children:i}):Object(b.jsx)(yn,{posts:c,userId:n._id,loading:s})]}):Object(b.jsx)(b.Fragment,{})},En=(n(72),function(e){e.location;var t=e.history,n=Object(a.useState)(""),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),l=Object(sn.a)(i,2),u=l[0],d=l[1],j=Object(o.c)((function(e){return e.userAuth})),f=j.error,O=j.user,h=Object(o.b)();Object(a.useEffect)((function(){O&&t.push("/")}),[h,O,t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Login | TweetHouse"}),Object(b.jsx)("div",{className:"loginPageLayout",children:Object(b.jsxs)("div",{className:"loginContainer",children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(Xt({email:c,password:u},"login"))},children:[f&&Object(b.jsx)("p",{children:f}),Object(b.jsx)("input",{type:"text",name:"logUsername",placeholder:"Username or email",required:!0,onChange:function(e){return s(e.target.value)}}),Object(b.jsx)("input",{type:"password",name:"logPassword",placeholder:"Password",required:!0,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("input",{type:"submit",value:"Login"})]}),Object(b.jsxs)("p",{children:["Need an account ? ",Object(b.jsx)(p.b,{to:"/register",children:"Register here."})]})]})})]})}),An=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),l=Object(sn.a)(i,2),u=l[0],d=l[1],j=Object(a.useState)(""),f=Object(sn.a)(j,2),O=f[0],h=f[1],g=Object(a.useState)(""),m=Object(sn.a)(g,2),x=m[0],v=m[1],y=Object(a.useState)(""),N=Object(sn.a)(y,2),_=N[0],S=N[1],C=Object(a.useState)(""),I=Object(sn.a)(C,2),w=I[0],T=I[1],E=Object(o.b)(),A=Object(o.c)((function(e){return e.userAuth})),L=A.error,k=A.user;Object(a.useEffect)((function(){k&&t.push("/")}),[E,k,t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Register | TweetHouse"}),Object(b.jsx)("div",{className:"loginPageLayout",children:Object(b.jsxs)("div",{className:"loginContainer",children:[Object(b.jsx)("h1",{children:"Register"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_===w?E(Xt({firstName:c,lastName:u,userName:O,email:x,password:_},"register")):alert("Passwords do not match. Please try again!")},children:[L&&Object(b.jsx)("p",{children:L}),Object(b.jsx)("input",{type:"text",name:"firstName",placeholder:"First name",value:c,required:!0,onChange:function(e){return s(e.target.value)}}),Object(b.jsx)("input",{type:"text",name:"lastName",placeholder:"Last name",value:u,required:!0,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("input",{type:"text",name:"userName",placeholder:"Username",value:O,required:!0,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:x,required:!0,onChange:function(e){return v(e.target.value)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return S(e.target.value)}}),Object(b.jsx)("input",{type:"password",name:"passwordConf",placeholder:"Confirm password",required:!0,onChange:function(e){return T(e.target.value)}}),Object(b.jsx)("input",{type:"submit",value:"Register"})]}),Object(b.jsxs)("p",{children:["Alrady have an account ? ",Object(b.jsx)(p.b,{to:"/login",children:"Login here."})]})]})})]})},Ln=function(e){var t=e.match.params.id,n=Object(o.b)(),r=Object(o.c)((function(e){return e.userAuth})).user,c=Object(o.c)((function(e){return e.postDetails})),s=c.loading,i=c.error,l=c.post;if(Object(a.useEffect)((function(){var e;n((e=t,function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vt}),t.next=4,X(e);case 4:a=t.sent,r=a.data,n({type:yt,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:Nt,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[n,t]),s)return Object(b.jsx)(jn,{});if(i)return Object(b.jsxs)("p",{children:["An Error Occured: $",i]});if(l){var u=l.postData,d=u.replyTo||u.retweetData||u,p=d.postedBy.firstName+" "+d.postedBy.lastName+" on TweetHouse: "+d.content;return Object(b.jsxs)("div",{children:[Object(b.jsx)(wn,{title:p}),l.replyTo&&(l.replyTo._id?Object(b.jsx)(vn,{post:l.replyTo,userId:r._id},l.replyTo._id):Object(b.jsx)("p",{children:"Original Post Not Found"})),Object(b.jsx)(vn,{post:l.postData,userId:r._id,largeFont:!0},l.postData._id),l.replies.length>0&&l.replies.map((function(e){return Object(b.jsx)(vn,{post:e,userId:r._id},e._id)}))]})}return Object(b.jsx)("p",{children:"No Post to Load"})},kn=(n(151),function(e){var t=e.data,n=e.handleSelect;return Object(b.jsx)("div",{className:"tabsContainer",children:t.map((function(e,t){return Object(b.jsx)(p.b,{to:"#",onClick:function(){return n(e.id)},className:"tab ".concat(e.active&&"active"),children:Object(b.jsx)("span",{children:e.name})},t)}))})}),Un=n(81),Pn=n.n(Un),Fn=(n(152),function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Mt}),t.next=4,ue(e);case 4:n({type:Gt}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:Ht,payload:pe(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}),Dn=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Mt}),t.next=4,de(e);case 4:n({type:Gt}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:Ht,payload:pe(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Rn=(n(153),function(e){var t=e.showModal,n=e.aspectRatio,c=void 0===n?1:n,s=e.dispatchAction,i=void 0===s?Fn:s,l=e.formDataName,u=void 0===l?"profileImage":l,d=e.modalTitle,p=void 0===d?"Upload a new profile picture":d,j=e.closeModal,f=Object(a.useState)(t||!1),O=Object(sn.a)(f,2),h=O[0],g=O[1],m=Object(a.useState)(null),x=Object(sn.a)(m,2),v=x[0],y=x[1],N=r.a.createRef(),_=Object(o.b)();Object(a.useEffect)((function(){v&&(void 0!==Sn&&Sn.destroy(),Sn=new Pn.a(N.current,{aspectRatio:c,background:!1}))}),[v,N,c]);var S=function(){g(!1),j()};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(hn,{show:h,title:p,actionBtnText:"Save",cancelBtnText:"Cancel",loadingSave:!1,submitHandler:function(){var e=Sn.getCroppedCanvas();if(!e)return alert("Could not upload image. Make suer it is an image file.");e.toBlob((function(e){if(e){var t=new FormData;t.append(u,e,"image.jpg"),_(i(t))}else alert("Could not Upload Image")})),S()},handleClose:S,children:[Object(b.jsx)("input",{type:"file",name:"filePhoto",onChange:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0],n=URL.createObjectURL(t);y(n)}else console.log("No file selected")}}),v&&Object(b.jsx)("div",{className:"imagePreviewContainer",children:Object(b.jsx)("img",{src:v,alt:"Preview",id:"imagePreview",ref:N})})]})})}),Bn=function(e){var t=e.uri,n=e.profileUser,r=Object(a.useState)(!1),c=Object(sn.a)(r,2),s=c[0],i=c[1],l=Object(o.c)((function(e){return e.loggedInUserInfo})).user;return Object(b.jsxs)("div",{className:"userImageContainer",children:[Object(b.jsx)("img",{src:"".concat(t),alt:"Profile Pic"}),n._id===(null===l||void 0===l?void 0:l._id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"profilePictureButton",onClick:function(){i(!0)},children:Object(b.jsx)("i",{className:"fas fa-camera"})}),s&&Object(b.jsx)(Rn,{showModal:s,closeModal:function(){i(!1)}})]})]})},Mn=function(e){e.uri;var t=e.profileUser,n=Object(a.useState)(!1),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(o.c)((function(e){return e.loggedInUserInfo})).user;return Object(b.jsxs)("div",{className:"coverPhotoContainer",children:[t.coverPhoto&&Object(b.jsx)("img",{src:t.coverPhoto,alt:"User's CoverPhoto"}),t._id===(null===i||void 0===i?void 0:i._id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"coverPhotoButton",onClick:function(){s(!0)},children:Object(b.jsx)("i",{className:"fas fa-camera"})}),c&&Object(b.jsx)(Rn,{showModal:c,aspectRatio:16/9,dispatchAction:Dn,formDataName:"coverPhoto",modalTitle:"Upload a new cover photo",closeModal:function(){s(!1)}})]})]})},Gn=function(e){var t=e.userInfo,n=Object(a.useState)(0),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=t._id,l=t.firstName,u=t.lastName,d=t.userName,j=t.profilePic,f=t.followers,O=t.following,h=Object(o.b)(),g=Object(o.c)((function(e){return e})),m=g.loggedInUserInfo.user,x=g.postList,v=x.posts,y=x.loading,N=x.error,_=g.postUpdate.success,S=v.find((function(e){return!0===e.pinned})),C=(null===m||void 0===m?void 0:m.following)&&m.following.includes(i),I=C?"Following":"Follow",w=C?"followButton following":"followButton",T=O.length||0,E=f.length||0;Object(a.useEffect)((function(){0===c?h(on(i)):1===c&&h(on(i,!0))}),[h,i,c,_]);var A=[{id:0,name:"Posts",link:"/profile/".concat(d),active:0===c},{id:1,name:"Replies",link:"/profile/".concat(d,"/replies"),active:1===c}];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"".concat(l," ").concat(u," @(").concat(d,")")}),Object(b.jsx)(rn,{title:l+" "+u}),Object(b.jsxs)("div",{className:"profileHeaderContainer",children:[Object(b.jsxs)("div",{className:"coverPhotoSection",children:[Object(b.jsx)(Mn,{uri:"",profileUser:t}),Object(b.jsx)(Bn,{uri:j,profileUser:t})]}),Object(b.jsx)("div",{className:"profileButtonsContainer",children:(null===m||void 0===m?void 0:m._id)!==i&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.b,{to:"/message/".concat(i),className:"profileButton",children:Object(b.jsx)("i",{className:"fas fa-envelope"})}),Object(b.jsx)("button",{onClick:function(){h(tn(i,!0))},className:w,children:I})]})}),Object(b.jsxs)("div",{className:"userDetailsContainer",children:[Object(b.jsx)("span",{className:"displayName",children:l+" "+u}),Object(b.jsxs)("span",{className:"username",children:["@",d]}),Object(b.jsx)("span",{className:"description"}),Object(b.jsxs)("div",{className:"followersContainer",children:[Object(b.jsxs)(p.b,{to:"/profile/".concat(i,"/following"),children:[Object(b.jsx)("span",{className:"value",children:T}),Object(b.jsx)("span",{children:"Following"})]}),Object(b.jsxs)(p.b,{to:"/profile/".concat(i,"/followers"),children:[Object(b.jsx)("span",{className:"value",children:E}),Object(b.jsx)("span",{children:"Followers"})]})]})]})]}),Object(b.jsx)(kn,{data:A,handleSelect:function(e){s(e)}}),y?Object(b.jsx)(jn,{}):N?Object(b.jsx)("p",{children:N}):0===v.length?Object(b.jsx)(pn,{}):Object(b.jsxs)(b.Fragment,{children:[0===c&&S&&Object(b.jsx)("div",{className:"pinnedPostContainer",children:Object(b.jsx)(vn,{post:S,userId:m._id})}),v.map((function(e){return Object(b.jsx)(vn,{post:e,userId:m._id},e._id)}))]})]})},Hn=(n(73),function(e){e.history;var t=Object(o.b)(),n=Object(o.c)((function(e){return e})),r=n.loggedInUserInfo,c=r.loading,s=r.error,i=r.user,l=n.profilePicUpload.success;return Object(a.useEffect)((function(){t(Zt())}),[t,l]),c?Object(b.jsx)("p",{children:"Loading..."}):s?Object(b.jsx)("p",{children:s}):i?Object(b.jsx)(Gn,{userInfo:i}):Object(b.jsx)("h1",{children:"No User found"})}),Wn=function(e){var t=e.match,n=e.history,r=t.params.id,c=Object(o.b)(),s=Object(o.c)((function(e){return e.loggedInUserInfo})).user,i=Object(o.c)((function(e){return e.userInfo})),l=i.user,u=i.loading,d=i.error,p=null===s||void 0===s?void 0:s._id,j=null===s||void 0===s?void 0:s.userName;return Object(a.useEffect)((function(){if(r===p||r===j)return n.push("/profile");c(en(r))}),[c,r,n,p,j]),u?Object(b.jsx)("p",{children:"Loading Profile..."}):d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(rn,{title:d}),Object(b.jsx)("span",{className:"errorMessage",children:"Check the url you are trying to access"})]}):l?Object(b.jsx)(Gn,{userInfo:l}):Object(b.jsx)("h1",{children:"User Not Found"})},Kn=function(e){var t=e.user,n=e.showFollowBtn,a=e.onSelectUser,r=Object(o.b)(),c=t.firstName+" "+t.lastName,s=Object(o.c)((function(e){return e.loggedInUserInfo})).user,i=n&&(null===s||void 0===s?void 0:s._id)!==t._id,l=(null===s||void 0===s?void 0:s.following)&&s.following.includes(t._id),u=l?"Following":"Follow",d=l?"followButton following":"followButton";return Object(b.jsxs)("div",{className:"user",onClick:function(){a&&a(t)},children:[Object(b.jsx)("div",{className:"userImageContainer",children:Object(b.jsx)("img",{src:t.profilePic,alt:"Profile Pic"})}),Object(b.jsx)("div",{className:"userDetailsContainer",children:Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)(p.b,{to:"/profile/".concat(t.userName),className:"displayName",children:c}),Object(b.jsxs)("span",{className:"username",children:[" @",t.userName]})]})}),i&&Object(b.jsx)("div",{className:"followButtonContainer",children:Object(b.jsx)("button",{onClick:function(){r(tn(t._id))},className:d,children:u})})]})},qn=(n(154),function(e){var t=e.users,n=e.showBtns,a=e.onSelectUser,r=function(e){a&&a(e)};return Object(b.jsx)("div",{className:"resultsContainer",children:0===t.length?Object(b.jsx)(pn,{message:"No user to show"}):t.map((function(e){return Object(b.jsx)(Kn,{user:e,showFollowBtn:n,onSelectUser:r},e._id)}))})}),Jn=function(e){var t=e.match,n=e.history,r=t.params.id,c=t.params.tabname,s=Object(o.b)(),i=Object(o.c)((function(e){return e.userInfo})),l=i.user,u=i.loading,d=i.error,p=Object(o.c)((function(e){return e.userFollowers})),j=p.users,f=p.loading,O=p.error,h=Object(o.c)((function(e){return e.userFollowingList})),g=h.users,v=h.loading,y=h.error,N="followers"===c?j:g,_="followers"===c?f:v,S="followers"===c?O:y;Object(a.useEffect)((function(){var e;"followers"===c?s((e=r,function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:F}),t.next=4,Y(e);case 4:a=t.sent,r=a.data,n({type:R,payload:r.followers}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:D,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())):"following"===c&&s(function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:B}),t.next=4,V(e);case 4:a=t.sent,r=a.data,n({type:G,payload:r.following}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:M,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(r))}),[s,r,c]),Object(a.useEffect)((function(){s(en(r))}),[s,r]);var C=[{id:0,name:"Followers",link:"/profile/".concat(r,"/followers"),active:"followers"===c},{id:1,name:"Following",link:"/profile/".concat(r,"/following"),active:"following"===c}];return u?Object(b.jsx)("p",{children:"Loading ..."}):d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(rn,{title:d||"Something Went Wrong"}),Object(b.jsx)("span",{className:"errorMessage",children:"Check the url you are trying to access"})]}):l?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Followers/Following | ".concat(l.firstName," ").concat(l.lastName)}),Object(b.jsx)(rn,{title:l.firstName+" "+l.lastName}),Object(b.jsx)(kn,{data:C,handleSelect:function(e){n.push(C[e].link)}}),_?Object(b.jsx)("p",{children:"Loading Users..."}):S?Object(b.jsx)("p",{children:S}):0===N.length?Object(b.jsx)(pn,{message:"No user to show"}):Object(b.jsx)(qn,{users:N,showBtns:!0})]}):Object(b.jsx)("h1",{children:"User Not Found"})},Yn=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r,c,s,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n({type:Ft}),a=e.type,r=e.text,"posts"!==a){t.next=12;break}return t.next=7,l=r,W.get("api/posts?search=".concat(l));case 7:c=t.sent,s=c.data,n({type:Dt,payload:s}),t.next=18;break;case 12:if("users"!==a){t.next=18;break}return t.next=15,z(r);case 15:o=t.sent,i=o.data,n({type:Rt,payload:i});case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),n({type:"SEARCH_FAIL",payload:pe(t.t0)});case 23:case"end":return t.stop()}var l}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},Vn=(n(155),function(e){var t=e.match,n=e.history,r=Object(a.useState)(""),c=Object(sn.a)(r,2),s=c[0],i=c[1],l=Object(a.useState)(!1),u=Object(sn.a)(l,2),d=u[0],p=u[1],j=t.params.tabname,f=t.url,O="posts"===j?"posts":"users"===j?"users":null,h=Object(a.useMemo)((function(){return[{id:0,name:"Posts",link:"/search/posts",active:"posts"===j},{id:1,name:"Users",link:"/search/users",active:"users"===j}]}),[j]),g=Object(o.b)(),m=Object(o.c)((function(e){return e})),x=m.loggedInUserInfo.user,v=m.search,y=v.posts,N=v.users,_=v.loading;Object(a.useEffect)((function(){h.some((function(e){return e.link===f}))||n.push(h[0].link)}),[h,j,n,f]),Object(a.useEffect)((function(){0===s.trim().length&&g({type:Bt})}),[s,g]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Posts/Users | Search"}),Object(b.jsxs)("div",{className:"searchBarContainer",children:[Object(b.jsx)("i",{className:"fas fa-search"}),Object(b.jsx)("input",{type:"text",name:"searchBox",id:"searchBox",placeholder:"Search for ".concat(j),onChange:function(e){p(!1),clearTimeout(Cn);var t=e.target.value;i(t),Cn=setTimeout((function(){t.trim().length>0&&O&&(g(Yn({type:O,text:t.trim()})),p(!0))}),1e3)}})]}),Object(b.jsx)(kn,{data:h,handleSelect:function(e){n.push(h[e].link)}}),_?Object(b.jsx)(jn,{}):0!==s.trim().length&&d?Object(b.jsxs)(b.Fragment,{children:["posts"===j&&Object(b.jsx)(yn,{posts:y,userId:x._id}),"users"===j&&Object(b.jsx)(qn,{users:N,showBtns:!0})]}):Object(b.jsx)(b.Fragment,{})]})}),zn=function(e){var t=e.chats;return Object(b.jsx)(b.Fragment,{children:0===t.length?Object(b.jsx)(pn,{message:"Nothing to show"}):t.map((function(e){return Object(b.jsx)(h,{chat:e},e._id)}))})},$n=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).chatList,n=t.loading,r=t.error,c=t.chats;return Object(a.useEffect)((function(){e(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Te}),e.next=4,W.get("/api/chats");case 4:n=e.sent,a=n.data,t({type:Ee,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Ae,payload:pe(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Messages | TweetHouse"}),Object(b.jsx)(rn,{title:"Inbox",headerBtnIcon:"far fa-plus-square",link:"/messages/new"}),n?Object(b.jsx)(jn,{}):r?Object(b.jsx)("p",{children:r}):Object(b.jsx)(zn,{chats:c})]})},Qn=(n(156),function(e){var t=e.history,n=Object(a.useState)(""),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),l=Object(sn.a)(i,2),u=l[0],d=l[1],p=Object(a.useState)([]),j=Object(sn.a)(p,2),f=j[0],O=j[1],h=Object(a.useRef)(null),g=Object(o.b)(),v=Object(o.c)((function(e){return e})),y=v.loggedInUserInfo.user,N=v.search,_=N.users,S=N.loading,C=v.chatCreate,I=C.success,w=C.chat,T=_.filter((function(e){return e._id!==(null===y||void 0===y?void 0:y._id)&&!f.some((function(t){return t._id===e._id}))}));Object(a.useEffect)((function(){if(I&&w)return t.push("/messages/".concat(w._id));0===c.length&&g({type:Bt})}),[c,g,I,t,w]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"New message | TweetHouse"}),Object(b.jsxs)("div",{className:"chatPageContainer",children:[Object(b.jsxs)("div",{className:"chatTitleBar",children:[Object(b.jsx)("label",{htmlFor:"userSearchTextbox",children:"To:"}),Object(b.jsxs)("div",{id:"selectedUsers",children:[f.length>0&&f.map((function(e){var t=e._id,n=e.firstName,a=e.lastName;return Object(b.jsx)("span",{className:"selectedUser",children:n+" "+a},t)})),Object(b.jsx)("input",{ref:h,type:"text",id:"userSearchTextbox",placeholder:"Type the name of the person",onChange:function(e){d(!1),clearTimeout(In);var t=e.target.value.trim();s(t),In=setTimeout((function(){t.length>0&&(g(Yn({type:"users",text:t})),d(!0))}),1e3)},onKeyDown:function(e){var t=""===h.current.value;if("Backspace"===e.key&&t){var n=Object(jt.a)(f);n.pop(),O(n)}}})]})]}),Object(b.jsx)("div",{className:"resultsContainer",children:!S&&0!==c.length&&u&&Object(b.jsx)(qn,{users:T,onSelectUser:function(e){O((function(t){return[].concat(Object(jt.a)(t),[e])})),s(""),h.current.value="",h.current.focus(),g({type:Bt})}})}),Object(b.jsx)("button",{id:"createChatButton",disabled:0===f.length,onClick:function(){g(function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Re}),t.next=4,ce(e);case 4:a=t.sent,r=a.data,n({type:Be,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:Me,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(f))},children:"Create chat"})]})]})}),Xn=function(e){var t=e.lastMessage,n=e.message,a=e.nextMessage,r=Object(o.c)((function(e){return e.loggedInUserInfo.user})),c=n.content,s=n.sender,i=s._id,l=s.firstName,u=s.lastName,d=s.profilePic,p=n.loading,j=n.error,f=i===(null===r||void 0===r?void 0:r._id),O=function(e,t){return!e||e.sender._id!==t}(t,i),h=function(e,t){return!t||t.sender._id!==e}(n.sender._id,a),g="message "+(f?"mine":"theirs")+" "+(O?"first":"")+" "+(h?"last":"");return Object(b.jsxs)("li",{className:g,children:[!f&&Object(b.jsx)("div",{className:"imageContainer",children:h&&Object(b.jsx)("img",{src:d,alt:l})}),Object(b.jsxs)("div",{className:"messageContainer",children:[!f&&O&&Object(b.jsx)("span",{className:"senderName",children:l+" "+u}),Object(b.jsx)("span",{className:"messageBody",children:c}),f&&p&&Object(b.jsx)(jn,{}),f&&j&&Object(b.jsx)("span",{className:"errorText",children:j})]})]})},Zn=(n(157),function(e){var t=e.chatId,n=Object(a.useRef)(null),r=Object(o.b)(),c=Object(o.c)((function(e){return e})),s=c.messageList,i=s.loading,l=s.error,u=s.messages,d=c.messageSend.success;return Object(a.useEffect)((function(){r(function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:be}),t.next=4,ie(e);case 4:a=t.sent,r=a.data,n({type:Oe,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:he,payload:pe(t.t0)});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[r,t]),Object(a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:d?"smooth":"auto"})}),[u,d]),Object(b.jsxs)("ul",{className:"chatMessages",children:[i?Object(b.jsx)(jn,{}):l?Object(b.jsx)("p",{children:l}):0===u.length?Object(b.jsx)(pn,{message:"Conversation have not started yet"}):u.map((function(e,t){return Object(b.jsx)(Xn,{message:e,lastMessage:u[t-1],nextMessage:u[t+1]},e._id)})),Object(b.jsx)("div",{style:{height:0},ref:n})]})}),ea=function(e){var t=e.chat,n=Object(a.useState)(!1),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(t.chatName||""),l=Object(sn.a)(i,2),u=l[0],d=l[1],p=Object(o.b)(),j=Object(o.c)((function(e){return e.loggedInUserInfo})).user,O=function(){return s(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"ellipsis",children:Object(b.jsx)("span",{id:"chatName ellipsis",onClick:function(e){e.stopPropagation(),s(!0)},children:f(t,j._id)})}),Object(b.jsx)(hn,{show:c,title:"Change the chat name",actionBtnText:"Save",cancelBtnText:"Cancel",submitHandler:function(){var e,n;p((e=t._id,n=u,function(){var t=Object(x.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ge}),t.next=4,se(e,n);case 4:a({type:He}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:We,payload:pe(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),O()},handleClose:O,children:Object(b.jsx)("input",{id:"chatNameTextbox",type:"text",value:u,placeholder:"Enter the name for this chat",onChange:function(e){return d(e.target.value)}})})]})},ta=(n(158),function(e){var t=e.notifications,n=e.loading,a=e.error;return n?Object(b.jsx)(jn,{}):a?Object(b.jsx)("p",{children:a}):0===t.length?Object(b.jsx)(pn,{}):Object(b.jsx)(b.Fragment,{children:t.map((function(e){return Object(b.jsx)(an,{notification:e},e._id)}))})}),na=[{exact:!0,path:"/",component:Tn,layout:cn,protect:!0,pageTitle:"Home"},{exact:!0,path:"/post/:id",component:Ln,layout:cn,protect:!0,pageTitle:"View Post"},{exact:!0,path:"/profile",component:Hn,layout:cn,protect:!0},{exact:!0,path:"/profile/:id",component:Wn,layout:cn,protect:!0},{exact:!0,path:"/profile/:id/:tabname",component:Jn,layout:cn,protect:!0},{exact:!0,path:"/search/:tabname",component:Vn,layout:cn,protect:!0,pageTitle:"Search"},{exact:!0,path:"/messages",component:$n,layout:cn,protect:!0},{exact:!0,path:"/messages/new",component:Qn,layout:cn,protect:!0,pageTitle:"New message"},{exact:!0,path:"/message/:id",component:function(e){var t=e.match,n=Object(a.useState)(""),r=Object(sn.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),l=Object(sn.a)(i,2),u=l[0],d=l[1],p=t.params.id,j=Object(o.b)(),O=Object(o.c)((function(e){return e})),h=O.loggedInUserInfo.user,g=O.chatDetails,v=g.chat,y=g.loading,N=g.error,_=O.chatUpdate.success,S=O.socketChatRoom,C=S.isTyping,I=S.room;Object(a.useEffect)((function(){var e;return j(function(e){return function(t){it.emit("join room",e),it.on("typing",(function(e){return t({type:Ie,payload:{isTyping:!0,room:e}})})),it.on("stop typing",(function(e){return t({type:Ie,payload:{isTyping:!1,room:e}})}))}}(p)),j((e=p,function(){var t=Object(x.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Pe}),t.next=4,re(e);case 4:a=t.sent,r=a.data,n({type:Fe,payload:r}),n(Ke(e)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:De,payload:pe(t.t0)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),function(){j({type:we})}}),[j,p,_]);var w=function(){j(function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(a,r){var c,s,o,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Date.now().toString(),localStorage.setItem("messageId",c),n.prev=2,s=r().loggedInUserInfo.user,a({type:ge,payload:{sender:s,content:e,chat:t}}),n.next=7,oe(e,t);case 7:o=n.sent,i=o.data,$t(i),a({type:me,payload:i}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),a({type:xe,payload:{failedTextMessage:e,error:pe(n.t0)}});case 16:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(e,t){return n.apply(this,arguments)}}()}(c,p))};Object(a.useEffect)((function(){C&&p===I?d(!0):!1===C&&p===I&&d(!1)}),[C,p,I]);var T=function(){0!==c.trim().length?(w(),zt(p),s("")):console.log("No message")};if(y)return Object(b.jsx)("p",{children:"Loading..."});if(N)return Object(b.jsx)("p",{children:N});if(!v)return Object(b.jsx)("p",{children:"No Chat Found"});var E=function(e,t){var n=[];return 1===e.length?(n.push(e[0].profilePic),n):e.filter((function(e){return e._id!==t._id})).slice(0,3).map((function(e){return e.profilePic}))}(v.users,h),A=v.users.length-3-1;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Chat | ".concat(f(v,h._id))}),Object(b.jsxs)("div",{className:"chatPageContainer",children:[Object(b.jsxs)("div",{className:"chatTitleBarContianer",children:[Object(b.jsxs)("div",{className:"chatImagesContainer",children:[A>0&&Object(b.jsx)("div",{className:"userCount",children:Object(b.jsxs)("span",{children:["+",A]})}),E.map((function(e,t){return Object(b.jsx)("img",{src:e,alt:"User"+t},t)}))]}),Object(b.jsx)(ea,{chat:v})]}),Object(b.jsx)("div",{className:"mainContentContainer",children:Object(b.jsxs)("div",{className:"chatContainer",children:[Object(b.jsx)(Zn,{chatId:p}),u&&Object(b.jsx)("div",{className:"typingDots",children:Object(b.jsx)("img",{src:"/images/dots.gif",alt:"typing dots"})}),Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("textarea",{name:"messageInput",placeholder:"Type a message...",value:c,onChange:function(e){s(e.target.value)},onKeyDown:function(e){!function(e){Vt||(Vt=!0,it.emit("typing",e)),Pt=(new Date).getTime(),setTimeout((function(){(new Date).getTime()-Pt>=3e3&&Vt&&zt(e)}),3e3)}(p),"Enter"!==e.key||e.shiftKey||(T(),e.preventDefault())}}),Object(b.jsx)("button",{onClick:T,className:"sendMessageButton",children:Object(b.jsx)("i",{className:"fas fa-paper-plane"})})]})]})})]})]})},layout:cn,protect:!0,pageTitle:"Chat"},{exact:!0,path:"/notifications",component:function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).notificationList,n=t.loading,r=t.error,c=t.notifications;Object(a.useEffect)((function(){e(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Je}),e.next=4,W.get("/api/notifications");case 4:n=e.sent,a=n.data,t({type:Ye,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Ve,payload:pe(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(wn,{title:"Notifications | TweetHouse"}),Object(b.jsx)(rn,{title:"Notifications",headerBtnIcon:"fas fa-check-double",onBtnClick:function(){e(ot())}}),Object(b.jsx)(ta,{loading:n,error:r,notifications:c})]})},layout:cn,protect:!0},{exact:!0,path:"/register",component:An,protect:!1,pageTitle:"Register"},{exact:!0,path:"/login",component:En,protect:!1,pageTitle:"Login"}],aa=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})),n=t.userAuth.user,r=t.notificationMark.success,c=t.messageMark.success,s=!!n;return Object(a.useEffect)((function(){n&&(e(function(e){return function(t){lt(e,t)}}(n)),e(qe()),e(st())),e(Zt())}),[e,n]),Object(a.useEffect)((function(){r?(e(st()),e({type:rt})):c&&(e(qe()),e({type:Se}))}),[r,c,e]),Object(b.jsx)(p.a,{children:Object(b.jsx)(d.d,{children:na.map((function(e,t){return Object(b.jsx)(d.b,{exact:e.exact,path:e.path,render:function(t){return!e.protect||s?e.layout?Object(b.jsx)(e.layout,{history:t.history,pageTitle:e.pageTitle||null,children:Object(b.jsx)(e.component,Object(u.a)({},t))}):Object(b.jsx)(e.component,Object(u.a)({},t)):Object(b.jsx)(d.a,{to:{pathname:"/login",state:{from:t.location}}})}},t)}))})})};n(159);l.a.defaults.withCredentials=!0;var ra=function(){return Object(b.jsx)(aa,{})};n(160);s.a.render(Object(b.jsx)(o.a,{store:Yt,children:Object(b.jsx)(ra,{})}),document.getElementById("root"))},30:function(e,t,n){},44:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.5ebc252d.chunk.js.map